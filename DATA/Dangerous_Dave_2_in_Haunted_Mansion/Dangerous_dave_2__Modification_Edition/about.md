# Основное
Данная модификация является пре-бета версией игры "Dangerous Dave in the Haunted Mansion: Modification Edition". Код переписан с нуля, ресурсы взяты оригинальные.

Фактически данная игра является конструктором аркад, который даёт множество новых возможностей. На данный момент можно оценить только два уровня из оригинальной игры в связи с отсутствием написанного интеллекта для монстров, которые появляются с 3-го уровня.

# Нюансы
В версии pre-beta 0.4 с версии pre-beta 0.3 было внесено много изменений, в том числе все скрипты интеллекта монстров до 0.3 pre-beta перестали работать, при этом версия pre-beta 0.4 ещё не выпущена. Отсюда при попытке создать модпак для версии 0.3 всё получится, но с версии 0.4 он может не работать. Данная модификация выложена именно в версии pre-beta 0.3.

# Подробности
В данной модификации практически все параметры, а так же все ресурсы вынесены во внешние файлы. Это называется "модпак". Для стандартного Дейва используется модпак "StandartDave" (с версии pre-beta 0.4 опечатка исправлена, и он называется StandardDave). Редактора модпаков, к сожалению, я пока не написал. Таким образом, любые модпаки пока что можно создавать только вручную, для карт же используя сторонний редактор и конвертер в формат модификации. Написать можно практически любой платформер в данном стиле. Например, Марио. К сожалению, пока нельзя выйти за рамки возможностей Dangerous Dave 2 в рамках управления игроком, так как поведение игрока не вынесено во внешние файлы, а "зашито" внутрь бинарника. Интеллект монстров пишется на lua, возможны использования любых ресурсов. Данная программа пока работает только на платформе Windows, но переписыванием библиотеки отрисовки (чем я сейчас потихоньку и занимаюсь) можно достигнуть совместимости с любой платформой, в том числе Android и iOS.

Распишу, что уже есть:
1) Создание модпаков (к сожалению, только вручную).
2) Каждый модпак - собрание паков, где есть по одному паку каждого типа. Каждый пак
содержит все параметры и картинки необходимого типа.
Типы паков:
	a) BonusPacks - паки бонусов.
	b) DavePacks - паки дейвов.
	c) LevelPacks - паки уровней.
	d) MonsterPacks - паки монстров.
	e) ScreenPacks - паки экранов.
	f) SoundPacks - паки звуков.
	g) TexturePacks - паки текстур (тайлов для уровней)
	
Паки звуков пока не поддерживаются.

Так же есть возможность к модпакам подключать свои паки (работает по следующему правилу: загружается указанный "модпак", а затем поверх него загружаются, перезаписываю загруженные "паки", указанные дополнительно). То есть например к модпаку стандартного дейва подключить свои текстуры тайлов уровней (пак TexturePack). Или подключить свой пакет уровней. Написаны пока не все монстры, полностью работают только первые два уровня. Т.е. написаны 6 монстров (зомби, кидающая ножами бабка, паук и лямблия). Так же на начальном экране полёт картинки не такой, как в оригинальном Дейве, так как я - лентяй.

Описание переменных в DD2.ini:

[video]
resolutionX=320			- разрешение по X
resolutionY=200			- разрешение по Y
drawstep=32			- шаг прорисовки. То есть раз в 32 мс будет производится перерисовка экрана. И базовая обработка событий
animationstep=192		- шаг прорисовки анимации.
creaturesanimationstep=64	- шаг прорисовки анимации монстров.
usetilecache=true		- использование кэша тайлов.
usebonuscache=true		- использование кэша картинок бонусов.
usescreencache=true		- использование кэша картинок экранов.
usedavecache=true		- использование кэша картинок Дейва.
usemonstercache=true		- использование кэша картинок монстров.
animation=true			- включение/отключение анимации (ЛЮБОЙ анимации, то есть даже монстров, дейва, тайлов, так что отключение не дает использовать текстурпаки с выезжающими полочками, кольями и так далее).
tileanimation=true		- включение/отключение анимации тайлов, отключение не дает не дает использовать текстурпаки с выезжающими полочками, кольями и так далее.
bonusanimation=true		- включение/отключение анимации бонусов.
mainscreentimefreez=10		- время задержки при прокрутке главного экрана.
scale=2				- масштабирование окна игры

[resources]
pooling=false			- включение/отключение объединения ресурсов. То есть включение позволяет к модпаку подключать сторонние паки.
standart=true			- включить ли стандартный модпак (в версии 0.4 уже standard)
modpack=			- название модпака. Используется только при standart=false.
texturepack=			- название текстурпака. Используется только при pooling=true.
monsterpack=			- название монстрпака. Используется только при pooling=true.
bonuspack=			- название бонуспака. Используется только при pooling=true.
screenpack=			- название пака экранов. Используется только при pooling=true.
soundpack=			- название звукового пака. Используется только при pooling=true.
levelpack=			- название левелпака. Используется только при pooling=true.
davepack=			- название пака Дейва. Используется только при pooling=true.

[settings]
correctionphysics=true		- включить/выключить коррекцию физики. Не рекомендуется отключать.
gravity=6			- сила гравитации.
jumpstep=3			- число стадий ускорения при падении и прыжке.
maxnumberoftilesforjump=3	- количество стадий прыжка
jumpspeed=6			- сдвиг на число пикселей вверх за тик при прыжке.
timedooropen=10			- время открытия двери в мс.
timeexitdoor=1			- время ухода в дверь в мс.
timefreezejump=1		- время застывания в прыжке в мс.
timeshoot=12			- время одной стадии выстрела в мс.
realisticphysics=false		- включить/выключить реалистичную физику (в стандартном Дейве она нереалистичная).
distancelivemonstersX=2		- дистанция обработки монстров за краем экрана по X.
distancelivemonstersY=2		- дистанция обработки монстров за краем экрана по Y.
maxdistanceshoot=-1		- максимальная дистанция обработки выстрела (в пикселях).
stepcalculateshoot=3		- шаг обработки выстрела (в пикселях). Не будет попадания в монстров с размерами меньше данного значения.

[effects]
timelivepointseffect=16		- время жизни летящих очков.
changeXpointseffect=0		- изменение за один тик летящих очков по X.
changeYpointseffect=-2		- изменение за один тик летящих очков по Y.

[keys]
left=37				- код клавиши для шага влево.
right=39			- код клавиши для шага вправо.
up=38				- код клавиши для действия "вверх".
down=40				- код клавиши для действия "вниз".
shoot=18			- код клавиши для выстрела.
jump=17				- код клавиши для прыжка.
console=192			- код клавиши для вызова консоли (в консоль можно ввести level NUMBER - переход на уровень NUMBER, небольшие читы).

[loggers]
correctionphysics=false		- включить/выключить логирование коррекции физики.

Информацию по тому, что доступно и планируется, можно прочитать в Changes.txt

# Итоги
Скриншоты не прилагаются, так как полностью совпадают со скриншотами из оригинальной игры.